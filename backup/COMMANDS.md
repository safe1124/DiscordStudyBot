# 📚 勉強記録Bot コマンド一覧

このBotは勉強時間を記録・管理し、ランキングやToDoリストの機能を提供します。

## 🎯 勉強記録コマンド

### `/startstudy` - 勉強開始
勉強を開始します。開始時刻が記録されます。

**使い方:**
```
/startstudy
```

**例:**
- 初めて勉強を開始する場合: 新しいセッションが開始されます
- 一時停止中に使用する場合: 勉強を再開します

**注意:**
- すでに勉強中の場合は使用できません
- `/pausestudy`または`/stopstudy`で区切ってから再度開始してください

---

### `/pausestudy` - 一時停止
勉強を一時停止します。ここまでの時間が累計に加算されます。

**使い方:**
```
/pausestudy
```

**動作:**
- 現在のセッションの勉強時間を計算
- 累計時間に加算
- 一時停止状態に移行

**例:**
```
一時停止しました
今回の勉強は15分でした。
このセッションの合計は45分です。
```

---

### `/stopstudy` - 勉強終了
勉強セッションを完全に終了し、データベースに保存します。

**使い方:**
```
/stopstudy
```

**動作:**
- セッション全体の勉強時間を計算
- データベースに記録を保存
- 本日の合計勉強時間を表示

**例:**
```
勉強終了
今回の勉強は60分（約1時間0分）でした。
今日の合計は120分（約2時間0分）です。お疲れさまでした☕
```

---

## 📊 統計・ランキングコマンド

### `/stats` - 個人統計
あなた自身の勉強記録を表示します。

**使い方:**
```
/stats
```

**表示内容:**
- **今日**: 本日の累計勉強時間
- **今週(ISO)**: 今週の累計勉強時間（ISO週番号基準）
- **今月**: 今月の累計勉強時間

**例:**
```
学習記録（あなた）
Asia/Seoul時間で集計しています。

今日: 120分（約2時間0分）
今週(ISO): 480分（約8時間0分）
今月: 1800分（約30時間0分）
```

---

### `/rank` - 月間ランキング
今月の勉強時間ランキングトップ5を表示します。

**使い方:**
```
/rank
```

**表示内容:**
- 1位～5位までのユーザー
- 各ユーザーの今月の累計勉強時間
- 順位に応じた称号（ダイヤモンド級、エメラルド級など）

**例:**
```
今月の勉強王ランキング👑
2025-10の累計勉強時間トップ5を発表します！

順位
**1位 ダイヤモンド級** - @ユーザー1：3000分（約50時間0分）
**2位 エメラルド級** - @ユーザー2：2400分（約40時間0分）
**3位 サファイア級** - @ユーザー3：1800分（約30時間0分）
```

---

### `/globalstats` - 全体統計
全員分の勉強時間統計を表示します。

**使い方:**
```
/globalstats
```

**表示内容:**
- **今日**: 本日の上位5名
- **今週**: 今週の上位5名
- **今月**: 今月の上位5名

**例:**
```
みんなの勉強統計
上位5名の勉強時間を表示します。

今日 (2025-10-18)
1位 - @ユーザーA：180分
2位 - @ユーザーB：120分
...
```

---

## ✅ ToDoリストコマンド

### `/todoadd` - ToDo追加
新しいToDoを追加します。

**使い方:**
```
/todoadd content: [やるべきこと]
```

**パラメータ:**
- `content`: 追加したいToDoの内容（最大200文字）

**例:**
```
/todoadd content: 数学の宿題を終わらせる
/todoadd content: 英単語100個を覚える
/todoadd content: プログラミング課題を提出する
```

---

### `/todolist` - ToDo一覧
現在のToDo一覧を表示します（最大10件）。

**使い方:**
```
/todolist
```

**表示内容:**
- 番号付きのToDo一覧
- 完了状態（✅ 完了 / ⬜ 未完了）
- タスク内容

**例:**
```
ToDo一覧 (最大10件)

1. ⬜ 未完了 - 数学の宿題を終わらせる
2. ✅ 完了 - 英単語100個を覚える
3. ⬜ 未完了 - プログラミング課題を提出する
```

---

### `/todocomplete` - ToDo完了
指定した番号のToDoを完了状態にします。

**使い方:**
```
/todocomplete number: [番号]
```

**パラメータ:**
- `number`: `/todolist`で確認した番号（1以上の整数）

**例:**
```
/todocomplete number: 1
→ 「数学の宿題を終わらせる」に✅を付けました。
```

---

### `/tododelete` - ToDo削除
指定した番号のToDoを削除します。

**使い方:**
```
/tododelete number: [番号]
```

**パラメータ:**
- `number`: `/todolist`で確認した番号（1以上の整数）

**例:**
```
/tododelete number: 2
→ 「英単語100個を覚える」を削除しました。
```

---

## 💡 使用例とワークフロー

### 基本的な勉強の流れ
```
1. /startstudy          ← 勉強開始
2. [勉強する]
3. /pausestudy          ← 休憩（任意）
4. [休憩]
5. /startstudy          ← 再開（任意）
6. [勉強する]
7. /stopstudy           ← 終了・記録保存
```

### 統計確認の流れ
```
1. /stats               ← 自分の記録を確認
2. /rank                ← 月間ランキングを確認
3. /globalstats         ← 全体の統計を確認
```

### ToDoリスト活用の流れ
```
1. /todoadd content: タスク1    ← ToDoを追加
2. /todoadd content: タスク2    ← ToDoを追加
3. /todolist                    ← 一覧を確認
4. /todocomplete number: 1      ← 完了したら✅
5. /tododelete number: 2        ← 不要なら削除
```

---

## ⚠️ 注意事項

1. **タイムゾーン**: すべての時刻は`Asia/Seoul`タイムゾーンで記録されます
2. **最小記録時間**: 1分未満の勉強時間は1分として記録されます
3. **週の計算**: ISO週番号を使用しています（月曜日始まり）
4. **DMでは使用不可**: すべてのコマンドはサーバー内でのみ使用できます
5. **ToDo上限**: ToDoリストは最大10件まで表示されます

---

## 🆘 トラブルシューティング

### Q: コマンドが反応しない
A: Botが正常に起動しているか確認してください。再起動が必要な場合があります。

### Q: 勉強中なのに`/startstudy`が使えない
A: すでに勉強中です。`/pausestudy`または`/stopstudy`を先に実行してください。

### Q: ランキングが表示されない
A: まだ記録がありません。`/startstudy`で勉強を開始してください。

### Q: ToDoの番号がわからない
A: `/todolist`で一覧を確認してください。左側の番号を使用します。

---

## 📝 データの保存について

- 勉強記録は`/stopstudy`を実行した時点でデータベースに保存されます
- `/pausestudy`だけでは完全には保存されません（セッション内の一時データ）
- 必ず`/stopstudy`で終了することをお勧めします

---

**開発者向け情報:**
- データベース: SQLite (`study.db`)
- タイムゾーン: Asia/Seoul
- Discord.js バージョン: 14.x

